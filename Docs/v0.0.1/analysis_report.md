# Unity 프로젝트 분석 리포트 (0.0.1 버전)

## 📁 프로젝트 폴더 구조

```
Project_1/
├── Assets/
│   ├── _Core/                 # 핵심 시스템 스크립트
│   │   ├── GameTypes.cs       # 열쇠/문 타입 정의
│   │   ├── GameManager.cs     # 게임 매니저 (싱글톤)
│   │   ├── PauseMenuUI.cs     # 일시정지 UI
│   │   └── TestClick.cs       # 테스트용 스크립트
│   │
│   ├── _Scenes/               # 씬 파일들
│   │   ├── TitleScene.unity   # 타이틀 씬 (0.0.1에서는 미사용)
│   │   ├── Game_Map_1.unity   # 메인 게임 씬
│   │   └── Ending.unity       # 엔딩 씬
│   │
│   ├── Game/
│   │   ├── Player/
│   │   │   └── PlayerMove2D.cs     # 캐릭터 이동
│   │   └── Scripts/
│   │       ├── PlayerInventory.cs  # 인벤토리 시스템
│   │       ├── KeySelectPopup.cs   # 열쇠 선택 팝업
│   │       ├── Drawer.cs           # 서랍 상호작용
│   │       └── Door.cs             # 문 상호작용
│   │
│   ├── Settings/              # 프로젝트 설정
│   ├── TextMesh Pro/          # TextMeshPro 에셋
│   └── _Title/                # 타이틀 관련 (향후 사용)
│
├── Library/                   # Unity 빌드 캐시
├── Packages/                  # 패키지 매니페스트
├── ProjectSettings/           # 프로젝트 세팅
└── UserSettings/              # 사용자 설정
```

---

## 📄 주요 C# 스크립트 파일 요약

### ✅ 1. **GameTypes.cs** (_Core 폴더)
```csharp
// 열쇠 타입과 문 타입을 정의하는 enum
```

**기능:**
- `KeyType` enum: A, B, C 세 가지 열쇠 타입 정의
- `DoorType` enum: Move(이동용), Ending(엔딩용) 두 가지 문 타입 정의

**주석 상태:** ❌ 한글 주석 없음
**문제점:**
- 코드 설명 주석이 한글로 작성되지 않음 (주의사항 #4 위반)
- KeyType에 C가 정의되어 있으나, 스펙상 0.0.1 버전에서는 A와 B만 사용됨

---

### ✅ 2. **GameManager.cs** (_Core 폴더)
```csharp
// 게임의 전반적인 흐름을 관리하는 싱글톤 매니저
```

**기능:**
- 싱글톤 패턴으로 구현된 게임 매니저
- 일시정지(Pause) / 재개(Resume) 기능
- 씬 전환 (타이틀, 게임 씬)
- ESC 키로 일시정지 토글

**주석 상태:** ❌ 한글 주석 일부만 존재
**문제점:**
- 영문 주석이 대부분이며, 한글 주석이 부족 (주의사항 #4 위반)
- `titleSceneName = "TitleScene"` 설정이 있으나, 0.0.1 버전에서는 타이틀 씬을 사용하지 않음 (주의사항 #4 참고)
- `StartGame()`, `GoTitle()` 메서드가 정의되어 있으나 0.0.1 버전에서는 불필요

---

### ✅ 3. **PlayerMove2D.cs** (Game/Player 폴더)
```csharp
// 플레이어의 좌우 이동을 담당하는 스크립트
```

**기능:**
- A, D 키를 사용한 횡방향 이동 (주요 기능 #1 구현)
- Rigidbody2D를 사용한 물리 기반 이동
- 애니메이터 연동 (isWalking 파라미터)
- 캐릭터 스프라이트 좌우 반전

**주석 상태:** ⚠️ 주석이 한글이지만 깨져서 표시됨 (인코딩 문제)
**문제점:**
- 주석이 한글로 작성되었으나 UTF-8 인코딩 문제로 깨짐 (`// A / D �Է�` 등)
- 코드는 정상 작동할 것으로 보이나, 주석 가독성 문제

---

### ✅ 4. **PlayerInventory.cs** (Game/Scripts 폴더)
```csharp
// 플레이어의 인벤토리를 관리하는 스크립트
```

**기능:**
- `hasKey`: 열쇠 보유 여부 (bool)
- `currentKey`: 현재 보유 중인 열쇠 타입 (KeyType)
- `SetKey()`: 열쇠 획득 메서드

**주석 상태:** ❌ 한글 주석 없음
**문제점:**
- 코드 설명 주석이 전혀 없음 (주의사항 #4 위반)
- 스펙상 "한 가지만 보유 가능"이라는 제약이 코드에 구현되지 않음
  - 현재는 `SetKey()`를 호출하면 무조건 덮어씀
  - 기존 열쇠를 버리고 새 열쇠를 선택하는 로직이 없음

---

### ✅ 5. **KeySelectPopup.cs** (Game/Scripts 폴더)
```csharp
// 열쇠 선택 팝업 UI를 관리하는 스크립트
```

**기능:**
- `playerInventory` 참조
- `SelectKey(int keyIndex)`: 버튼 클릭 시 열쇠 선택 후 팝업 닫기

**주석 상태:** ❌ 한글 주석 없음
**문제점:**
- 코드 설명 주석이 전혀 없음 (주의사항 #4 위반)
- 열쇠 선택 시 기존 열쇠 여부를 확인하지 않음
  - 이미 열쇠를 보유하고 있을 때 경고 메시지 등이 없음

---

### ✅ 6. **Drawer.cs** (Game/Scripts 폴더)
```csharp
// 서랍 상호작용을 담당하는 스크립트
```

**기능:**
- `keyPopup` GameObject 참조
- `Interact()`: E 키로 상호작용 시 열쇠 선택 팝업 표시
- `used`: 서랍을 이미 열었는지 여부 (중복 사용 방지)

**주석 상태:** ❌ 한글 주석 없음
**문제점:**
- 코드 설명 주석이 전혀 없음 (주의사항 #4 위반)
- E 키 입력 처리 로직이 보이지 않음 (별도 스크립트에서 처리하는 것으로 추정)

---

### ✅ 7. **Door.cs** (Game/Scripts 폴더)
```csharp
// 문 상호작용을 담당하는 스크립트
```

**기능:**
- `doorType`: Move(씬 이동) 또는 Ending(엔딩 체크)
- `correctKey`: 엔딩 문에서 요구하는 올바른 열쇠
- `nextSceneName`: Move 타입 문의 다음 씬 이름
- `Interact()`: 문과 상호작용
  - Move 타입: 즉시 다음 씬으로 이동
  - Ending 타입: 열쇠 검사 후 성공/실패 처리

**주석 상태:** ⚠️ 주석이 한글이지만 깨져서 표시됨 (인코딩 문제)
**문제점:**
- 주석이 한글로 작성되었으나 UTF-8 인코딩 문제로 깨짐
- 엔딩 성공 시 실제 엔딩 씬으로 이동하는 로직이 누락됨
  - `Debug.Log("성공!");` 이후 실제 엔딩 처리 없음
- E 키 입력 처리 로직이 보이지 않음

---

### ✅ 8. **PauseMenuUI.cs** (_Core 폴더)
```csharp
// 일시정지 메뉴 UI 버튼 이벤트 처리
```

**기능:**
- `OnClickResume()`: 재개 버튼
- `OnClickTitle()`: 타이틀로 이동 버튼
- `OnClickTogglePause()`: 일시정지 토글 버튼

**주석 상태:** ❌ 한글 주석 없음
**문제점:**
- 코드 설명 주석이 전혀 없음 (주의사항 #4 위반)
- 0.0.1 버전에서는 타이틀 씬이 없으므로 `OnClickTitle()` 기능이 불필요

---

### ✅ 9. **TestClick.cs** (_Core 폴더)
```csharp
// 테스트용 버튼 클릭 확인 스크립트
```

**기능:**
- `Ping()`: 버튼 클릭 시 디버그 로그 출력

**주석 상태:** ❌ 한글 주석 없음
**문제점:**
- 테스트용 스크립트로, 0.0.1 버전 빌드 시 제거 필요 여부 확인 필요

---

## ⚠️ 예상되는 충돌 및 문제점

### 🔴 **1. 치명적 문제: 상호작용(E키) 입력 처리 누락**
**문제:**
- `Drawer.cs`와 `Door.cs`에 `Interact()` 메서드는 있으나, E 키 입력을 감지하고 `Interact()`를 호출하는 스크립트가 확인되지 않음
- 플레이어가 가구에 근접했을 때 E 키 입력을 처리하는 로직 누락

**예상 충돌:**
- 게임 실행 시 E 키를 눌러도 서랍이나 문과 상호작용할 수 없음
- 주요 기능 #2 (상호작용 E키) 미구현

**해결 필요:**
- `PlayerInteraction.cs` 등의 스크립트 추가 필요
- 레이캐스트 또는 Trigger 방식으로 근접 감지 후 E 키 입력 처리

---

### 🟡 **2. 중요 문제: 엔딩 처리 로직 미완성**
**문제:**
- `Door.cs`의 `Interact()` 메서드에서 올바른 열쇠 사용 시 "성공!" 로그만 출력하고 실제 엔딩 씬 전환이 없음
- 게임 흐름 #6 (엔딩) 미구현

**예상 충돌:**
- 올바른 열쇠로 문을 열어도 엔딩 씬으로 이동하지 않음

**해결 필요:**
```csharp
if (playerInventory.currentKey == correctKey)
{
    Debug.Log("성공!");
    SceneManager.LoadScene("Ending"); // 엔딩 씬 이동 추가 필요
}
```

---

### 🟡 **3. 중요 문제: 인벤토리 "한 가지만 보유" 제약 미구현**
**문제:**
- 스펙상 "열쇠는 한 가지만 보유 가능"이라고 명시되었으나, 현재 코드는 단순히 덮어쓰기만 함
- 이미 열쇠를 보유한 상태에서 새 열쇠를 선택할 때 경고나 선택 UI가 없음

**예상 충돌:**
- 플레이어가 의도치 않게 열쇠를 교체할 수 있음
- 게임 플레이 혼란 가능성

**해결 필요:**
- `KeySelectPopup.cs`에서 이미 열쇠 보유 시 교체 확인 로직 추가
- 또는 `Drawer.cs`에서 이미 열쇠가 있을 때 팝업 표시 차단

---

### 🟡 **4. 중요 문제: 한글 주석 인코딩 깨짐**
**문제:**
- `PlayerMove2D.cs`와 `Door.cs`의 한글 주석이 UTF-8 인코딩 문제로 깨져서 표시됨
- 예: `// A / D �Է�` (원래는 "A / D 입력"일 가능성)

**예상 충돌:**
- 코드 가독성 저하
- 주의사항 #4 (한글 주석) 요구사항 미충족

**해결 필요:**
- Visual Studio 또는 Unity 에디터 설정에서 UTF-8 with BOM으로 파일 재저장
- 모든 한글 주석 정상 표시 확인

---

### 🟢 **5. 경미한 문제: 한글 주석 전반적 부족**
**문제:**
- 대부분의 스크립트에 한글 주석이 없거나 부족함
- 주의사항 #4: "모든 코드에 해당 코드를 설명하는 주석을 한글로 작성해야함"

**영향:**
- 코딩 문외한이 이해하기 어려움 (최우선 목표 #5 위반)

**해결 필요:**
- 모든 클래스, 메서드, 주요 변수에 한글 주석 추가
- 각 스크립트 상단에 전체 기능 요약 주석 추가

---

### 🟢 **6. 경미한 문제: 0.0.1 버전에서 불필요한 기능**
**문제:**
- `GameManager.cs`에 타이틀 씬 관련 기능 포함
  - `titleSceneName = "TitleScene"`
  - `GoTitle()` 메서드
  - `StartGame()` 메서드
- 주의사항 #4: "타이틀 씬 없음 (0.0.1버전 기준)"
- 최우선 목표 #5: "추후 확장을 고려한 기능은 추가하지 않음"

**영향:**
- 혼란 가능성 (타이틀 기능이 있으나 실제로는 사용하지 않음)
- 0.0.1 버전 최소화 원칙 위배

**해결 필요:**
- 0.0.1 버전에서는 타이틀 관련 코드 주석 처리 또는 제거
- 추후 버전에서 재활성화

---

### 🟢 **7. 경미한 문제: KeyType C 사용 여부 불명확**
**문제:**
- `GameTypes.cs`에 `KeyType.A`, `B`, `C`가 정의되어 있으나, 스펙상 0.0.1 버전에서는 A와 B만 사용
- 섹션 #2 (게임 흐름): "열쇠 a, 열쇠 b"만 언급

**영향:**
- 혼란 가능성 (C 타입 열쇠가 실제로 사용되는지 불명확)

**해결 필요:**
- 0.0.1 버전에서는 `KeyType.C` 제거 또는 주석 처리
- 추후 확장 시 재활성화

---

### 🟢 **8. 경미한 문제: 대사 출력 기능 미확인**
**문제:**
- 주요 기능 #3에 "대사 출력"이 명시되어 있으나, 관련 스크립트가 확인되지 않음
- TextMeshPro 에셋은 존재하나, 대사 시스템 스크립트 없음

**예상 충돌:**
- 대사 출력 기능이 구현되지 않았을 가능성
- 오프닝/엔딩 대사 표시 불가

**해결 필요:**
- `DialogueManager.cs` 등의 대사 시스템 스크립트 존재 여부 확인
- 없을 경우 추가 개발 필요

---

## 📊 현재 상태 요약

### ✅ **구현 완료된 기능**
1. ✅ 캐릭터 횡방향 이동 (A, D 키)
2. ✅ 인벤토리 시스템 (데이터 구조)
3. ✅ 열쇠 선택 팝업
4. ✅ 서랍 상호작용 (데이터 구조)
5. ✅ 문 상호작용 (데이터 구조)
6. ✅ 일시정지 시스템 (ESC 키)

### ❌ **미구현 또는 불완전한 기능**
1. ❌ **E 키 상호작용 입력 처리** (치명적)
2. ❌ **엔딩 씬 전환 로직** (중요)
3. ⚠️ **인벤토리 "한 가지만 보유" 제약** (중요)
4. ⚠️ **대사 출력 시스템** (주요 기능 #3)
5. ⚠️ **한글 주석 전반 추가** (주의사항 #4)
6. ⚠️ **한글 주석 인코딩 수정** (가독성)

---

## 🎯 0.0.1 버전 정상 작동을 위한 필수 수정 사항

### **우선순위 1 (치명적):**
1. E 키 상호작용 시스템 구현
   - 플레이어 근접 감지
   - E 키 입력 시 `Interact()` 호출
   - 상호작용 가능 UI 표시 (선택)

### **우선순위 2 (중요):**
2. 엔딩 처리 완성
   - `Door.cs`에서 올바른 열쇠 사용 시 엔딩 씬 전환
3. 한글 주석 인코딩 수정
   - UTF-8 with BOM으로 파일 재저장
4. 전체 스크립트 한글 주석 추가
   - 클래스, 메서드, 변수 설명

### **우선순위 3 (개선):**
5. 인벤토리 제약 로직 추가
   - 이미 열쇠 보유 시 교체 확인
6. 대사 출력 시스템 확인
   - 오프닝/엔딩 대사 구현 상태 점검
7. 0.0.1 버전 불필요 기능 정리
   - 타이틀 씬 관련 코드 주석 처리
   - KeyType.C 제거

---

## 🔍 추가 확인 필요 사항

1. **씬 설정 확인:**
   - Build Settings에 Game_Map_1과 Ending 씬이 추가되어 있는지
   - 게임 시작 씬이 올바르게 설정되어 있는지

2. **프리팹/GameObject 연결 상태:**
   - `Drawer.cs`의 `keyPopup` 연결
   - `Door.cs`의 `playerInventory` 연결
   - `GameManager.cs`의 `pausePanel` 연결
   - `KeySelectPopup.cs`의 `playerInventory` 연결

3. **애니메이터 설정:**
   - PlayerMove2D의 `isWalking` 파라미터 설정 여부

4. **대사 시스템:**
   - 숨겨진 대사 관련 스크립트 존재 여부
   - UI Canvas에 대사 출력 TextMeshPro 오브젝트 확인

---

## 📝 권장 다음 단계

1. **즉시 수정:**
   - E 키 상호작용 시스템 구현 (PlayerInteraction.cs 추가)
   - 엔딩 씬 전환 로직 추가
   - 한글 주석 인코딩 수정

2. **코드 정리:**
   - 모든 스크립트에 한글 주석 추가
   - 0.0.1 버전 불필요 기능 주석 처리

3. **테스트:**
   - Unity Editor에서 플레이 테스트
   - 게임 흐름 전체 확인 (오프닝 → 탐색 → 상호작용 → 열쇠 획득 → 문 열기 → 엔딩)
   - 빌드 후 독립 실행 테스트

4. **최종 확인:**
   - 주의사항 1~5번 항목 모두 충족 여부 재확인
   - 빌드 에러 없이 정상 작동 확인
